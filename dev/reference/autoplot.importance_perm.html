<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Visualize importance scores — autoplot.importance_perm • important</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualize importance scores — autoplot.importance_perm"><meta name="description" content="Visualize importance scores"><meta property="og:description" content="Visualize importance scores"><meta name="robots" content="noindex"><script defer data-domain="important.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">important</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/important/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Visualize importance scores</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/important/blob/main/R/plots.R" class="external-link"><code>R/plots.R</code></a></small>
      <div class="d-none name"><code>autoplot.importance_perm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Visualize importance scores</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'importance_perm'</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  top <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  metric <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eval_time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"importance"</span>,</span>
<span>  std_errs <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.95</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A tibble of results from <code><a href="importance_perm.html">importance_perm()</a></code>.</p></dd>


<dt id="arg-top">top<a class="anchor" aria-label="anchor" href="#arg-top"></a></dt>
<dd><p>An integer for how many terms to show. To define importance when
there are multiple metrics, the rankings of predictors are computed across
metrics and the average rank is used. In the case of tied rankings, all the
ties are included.</p></dd>


<dt id="arg-metric">metric<a class="anchor" aria-label="anchor" href="#arg-metric"></a></dt>
<dd><p>A character vector or <code>NULL</code> for which metric to plot. By
default, all metrics will be shown via facets. Possible options are
the entries in <code>.metric</code> column of the object.</p></dd>


<dt id="arg-eval-time">eval_time<a class="anchor" aria-label="anchor" href="#arg-eval-time"></a></dt>
<dd><p>For censored regression models, a vector of time points at
which the survival probability is estimated.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>A character value. The default is <code>"importance"</code> which shows the
overall signal-to-noise ration (i.e., mean divided by standard error).
Alternatively, <code>"difference"</code> shows the mean difference value with standard
error bounds.</p></dd>


<dt id="arg-std-errs">std_errs<a class="anchor" aria-label="anchor" href="#arg-std-errs"></a></dt>
<dd><p>The number of standard errors to plot (when <code>type = "difference"</code>).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Not used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>ggplot2</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Pre-computed results. See code at</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"make_imp_example.R"</span>, package <span class="op">=</span> <span class="st">"important"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/home/runner/work/_temp/Library/important/make_imp_example.R"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load the results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"imp_examples.RData"</span>, package <span class="op">=</span> <span class="st">"important"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A classification model with two classes and highly correlated predictors.</span></span></span>
<span class="r-in"><span><span class="co"># To preprocess them, PCA feature extraction is used.</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># Let’s first view the importance in terms of the original predictor set</span></span></span>
<span class="r-in"><span><span class="co"># using 50 permutations:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">imp_orig</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 390 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .metric     predictor     n    mean std_err importance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> roc_auc     Genotype     50 0.108   0.004<span style="text-decoration: underline;">42</span>      24.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> brier_class Genotype     50 0.035<span style="text-decoration: underline;">3</span>  0.001<span style="text-decoration: underline;">51</span>      23.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> accuracy    Genotype     50 0.056<span style="text-decoration: underline;">8</span>  0.003<span style="text-decoration: underline;">14</span>      18.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> roc_auc     Eotaxin_3    50 0.056<span style="text-decoration: underline;">8</span>  0.003<span style="text-decoration: underline;">92</span>      14.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> roc_auc     age          50 0.062<span style="text-decoration: underline;">2</span>  0.004<span style="text-decoration: underline;">63</span>      13.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> brier_class age          50 0.019<span style="text-decoration: underline;">0</span>  0.001<span style="text-decoration: underline;">43</span>      13.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> brier_class Eotaxin_3    50 0.013<span style="text-decoration: underline;">2</span>  0.001<span style="text-decoration: underline;">30</span>      10.2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> accuracy    age          50 0.018<span style="text-decoration: underline;">3</span>  0.002<span style="text-decoration: underline;">75</span>       6.67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> roc_auc     male         50 0.020<span style="text-decoration: underline;">1</span>  0.003<span style="text-decoration: underline;">52</span>       5.72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> brier_class Resistin     50 0.005<span style="text-decoration: underline;">35</span> 0.001<span style="text-decoration: underline;">15</span>       4.65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 380 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">imp_orig</span>, top <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.importance_perm-1.png" alt="" width="768" height="552"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now assess the importance in terms of the PCA components</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">imp_derv</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 36 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .metric     predictor         n   mean std_err importance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> brier_class Genotype_E3E4    50 0.181  0.003<span style="text-decoration: underline;">32</span>       54.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> brier_class Genotype_E3E3    50 0.132  0.002<span style="text-decoration: underline;">93</span>       45.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> roc_auc     Genotype_E3E4    50 0.238  0.006<span style="text-decoration: underline;">32</span>       37.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> accuracy    Genotype_E3E4    50 0.140  0.004<span style="text-decoration: underline;">27</span>       32.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> brier_class Genotype_E2E3    50 0.060<span style="text-decoration: underline;">5</span> 0.001<span style="text-decoration: underline;">96</span>       30.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> accuracy    Genotype_E3E3    50 0.090<span style="text-decoration: underline;">2</span> 0.003<span style="text-decoration: underline;">64</span>       24.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> roc_auc     Genotype_E4E4    50 0.084<span style="text-decoration: underline;">1</span> 0.003<span style="text-decoration: underline;">49</span>       24.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> roc_auc     Genotype_E3E3    50 0.106  0.004<span style="text-decoration: underline;">72</span>       22.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> brier_class Genotype_E4E4    50 0.037<span style="text-decoration: underline;">0</span> 0.001<span style="text-decoration: underline;">66</span>       22.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> accuracy    Genotype_E2E3    50 0.049<span style="text-decoration: underline;">7</span> 0.002<span style="text-decoration: underline;">60</span>       19.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 26 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">imp_derv</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.importance_perm-2.png" alt="" width="768" height="552"></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">imp_derv</span>, metric <span class="op">=</span> <span class="st">"brier_class"</span>, type <span class="op">=</span> <span class="st">"difference"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.importance_perm-3.png" alt="" width="768" height="552"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

